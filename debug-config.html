<!DOCTYPE html>
<html>
<head>
    <title>广告配置调试</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .config { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        button { padding: 10px 15px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .clear { background: #dc3545; }
        .clear:hover { background: #c82333; }
    </style>
</head>
<body>
    <h1>广告配置调试工具</h1>
    
    <button onclick="showConfig()">显示当前配置</button>
    <button onclick="saveTestConfig()">保存测试配置</button>
    <button onclick="clearConfig()" class="clear">清除配置</button>
    <button onclick="triggerUpdate()">触发更新事件</button>
    
    <div id="output" class="config">点击按钮查看配置...</div>
    
    <script>
        function showConfig() {
            const config = localStorage.getItem('ad-config');
            const prefs = localStorage.getItem('user-ad-preferences');
            
            document.getElementById('output').innerHTML = `
                <h3>ad-config:</h3>
                <pre>${config || '未找到配置'}</pre>
                <h3>user-ad-preferences:</h3>
                <pre>${prefs || '未找到偏好设置'}</pre>
            `;
        }
        
        function saveTestConfig() {
            const testConfig = {
                showHomeBannerRow: true,
                showSidebarAds: true,
                showRedirectAd: true,
                homeBannerAds: [
                    {
                        id: 'home-banner-1',
                        title: '测试广告1',
                        imageUrl: 'https://r2.sakinori.top/6e194add9120240905110255.webp',
                        clickUrl: 'https://example.com/link1',
                        description: '这是测试广告1',
                        isActive: true
                    },
                    {
                        id: 'home-banner-2', 
                        title: '测试广告2',
                        imageUrl: 'https://r2.sakinori.top/6e194add9120240905110255.webp',
                        clickUrl: 'https://example.com/link2',
                        description: '这是测试广告2',
                        isActive: true
                    }
                ],
                redirectAd: {
                    id: 'redirect-ad',
                    title: 'Redirect测试广告',
                    imageUrl: 'https://r2.sakinori.top/6e194add9120240905110255.webp',
                    clickUrl: 'https://example.com/redirect-link',
                    description: 'Redirect页面测试广告',
                    isActive: true
                }
            };
            
            localStorage.setItem('ad-config', JSON.stringify(testConfig));
            alert('测试配置已保存！');
            showConfig();
        }
        
        function clearConfig() {
            localStorage.removeItem('ad-config');
            localStorage.removeItem('user-ad-preferences');
            alert('配置已清除！');
            showConfig();
        }
        
        function triggerUpdate() {
            window.dispatchEvent(new Event('adConfigUpdated'));
            alert('已触发配置更新事件！');
        }
        
        // 页面加载时显示配置
        window.onload = showConfig;
    </script>
</body>
</html>